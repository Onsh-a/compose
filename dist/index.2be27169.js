var e=e=>{if(1===e)return"root";if(!+e)return NaN;let t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],o="",r=3;for(;r--;)o=(n[+t.pop()+10*r]||"")+o;return Array(+t.join("")+1).join("M")+o};const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n={maj:[0,4,7],m:[0,3,7],dim:[0,3,6]},o=e=>{let t=e.split("");return t=t.filter((e=>/[a-zA-Z]+/.test(e))),t.shift(),t.join("")||"maj"},r=e=>e.split("").includes("#")?`${e[0]}#`:`${e[0]}`;var l=e=>{const l=o(e),s=t.indexOf(r(e)),i=t.slice(s).concat(t.slice(0,s));return n[l].map((e=>i[e]))};document.addEventListener("DOMContentLoaded",(function(){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n={major:[0,2,4,5,7,9,11],minor:[0,2,3,5,7,8,10]},o={major:[0,3,4],minor:[0,2,5,6]},r={root:"C",scale:"major",getPattern:function(){return n[this.scale]},instrument:"guitar"};let s=[];const i=document.querySelectorAll(".select_root_item_name, .select_scale_item_name, .select_instrument_item_name"),c=document.querySelector(".result_output"),a=document.querySelector(".progression_chords_diatonic_item"),p=document.querySelector(".progression_chords_basic_item");i.forEach(((e,n)=>{e.addEventListener("click",(n=>{d(e),s=m(r.root,t,r.getPattern()),c.innerHTML=s,u(s,r.scale),C(),E(s)}))})),setTimeout((()=>{document.querySelector(".select_root_item_name.active").dispatchEvent(new Event("click"))}),1e3);const d=e=>{const t=e.dataset.type;r[t]="root"===t?e.innerText:e.innerText.toLowerCase();e.closest(".select-wrapper").querySelector(".active").classList.remove("active"),e.classList.add("active")},m=(e,t,n)=>{e=t.indexOf(e);const o=t.slice(e).concat(t.slice(0,e));return n.map((e=>o[e]))},u=(t,n)=>{const r=o[n],l=[],s=[];let i,c;t.forEach(((t,n)=>{if(r.includes(n))return l.push({chord:t,step:e(n+1)});s.push({chord:t,step:e(n+1)})})),"major"===n?(i=s.map(((e,t)=>`\n        <span>${e.step}:</span>\n        <span class="chord">${e.chord}${3===t?"dim":"m"}</span><br>`)),c=l.map(((e,t)=>`\n        <span>${e.step}:</span> \n        <span class="chord">${e.chord}</span><br>`))):(i=s.map(((e,t)=>`\n        <span>${e.step}:</span> \n        <span class="chord">${e.chord}${0===t?"dim":"m"}</span><br>`)),c=l.map(((e,t)=>`\n        <span>${e.step}:</span> \n        <span class="chord">${e.chord}${0===t?"m":""}</span><br>`))),a.innerHTML=c.join(""),p.innerHTML=i.join("")},C=()=>{const e=document.querySelectorAll(".chord"),t=document.querySelector(".chord-apps");e.forEach((e=>{e.addEventListener("click",(e=>{t.innerHTML=`${e.target.innerText} = ${l(e.target.innerText)}`}))}))},f=document.querySelector(".canvas"),h=f.getContext("2d");h.scale(6,6);const D=[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0],A=[["E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#"],["B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#"],["G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A"],["D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E"],["A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],["E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#"]],y=[],g=[],E=e=>{h.clearRect(0,0,f.width,f.height),F((e=>t.map((t=>e.includes(t))))(e),D,r.instrument)},F=(e,t,n)=>{if("piano"===n){let n=40,o=3;t.forEach(((r,l)=>{const s=e[l];h.lineWidth=.2,h.strokeStyle="black",r?(h.fillStyle=s?"lightgrey":"white",h.globalCompositeOperation="destination-over",h.fillRect(n,o,8,40),h.strokeRect(n,o,8,40)):(h.fillStyle=s?"darkred":"black",h.globalCompositeOperation="source-over",h.fillRect(n,o,6,30),h.strokeRect(n,o,6,30)),!0===r&&(n+=5),!1===r&&!1!==t[l+1]&&(n+=2.5),4===l&&(n+=2.5)}))}else"guitar"===n&&(S(),_(),v(y))},S=()=>{h.globalCompositeOperation="source-over",h.lineWidth="0.4";h.strokeStyle="black",h.fillStyle="#a36f40",h.strokeRect(8,3,120,35),h.fillRect(8,3,120,35);for(let e=2;e<=36;e+=6)h.strokeStyle="lightgrey",h.moveTo(8,3.3+e),h.lineTo(128,3.3+e),h.stroke();for(let e=8;e<=119;e+=8)h.moveTo(8+e,3),h.lineTo(8+e,38),h.stroke();h.font="4px Nunito, sans-serif",h.fillStyle="black",h.fillText("5",43,43),h.fillText("7",59,43),h.fillText("9",75,43),h.fillText("12",97.5,43)},_=()=>{for(let e=0;e<6;e++)y[e]=A[e].filter((e=>s.includes(e))),g[e]=A[e].map((t=>y[e].includes(t)))},v=()=>{let e=-.5;for(let t=0;t<6;t++){let n=-4;e+=6;for(let o=0;o<15;o++)!0!==g[t][o]||(h.beginPath(),h.arc(n+8,e,2,0,2*Math.PI),h.fillStyle=A[t][o]!==r.root?"#26CC26":"gold",h.fill(),h.beginPath(),h.font="3px Nunito, sans-serif",h.fillStyle="black",h.fillText(A[t][o],n+8-1,e+1)),n+=8}}}));
//# sourceMappingURL=index.2be27169.js.map
